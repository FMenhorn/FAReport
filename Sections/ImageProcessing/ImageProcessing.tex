\section{Image Processing}
\label{sec: imageProcessing}
One of Grand Theft Boat's USPs is the freedom for players to fully customize their level maps. Players can design complex maps replete with shorelines, connected water bodies, and floating spherical obstacles of varying radii. All this can be done using a simple computer graphics software like Gimp (Linux), MS Paint (Windows) and Paintbrush (Mac). 

\begin{figure}
\centering
  \includegraphics[scale=0.6]{img/ImageProcessing/UML_ImgProc_PNG.png}
\caption{UML diagram for the image processing code\label{fig:UMLImgProc}}
\end{figure}

In order to extract information about the terrain and participating bodies, the team relied on processing the input image through extensive use of the OpenCV library. This chapter describes the workflow involved in this stage. The broad structure of the image processing code is shown in Figure \ref{fig:UMLImgProc}.

The other parts of the code interact with the Image Processing section through an instance of \verb|ProcessingManager|. This class takes an image from the player, processes it to extract and store information about different terrain objects, and provides functions to return this information when required by other sections.

\input{Sections/ImageProcessing/SubSections/InputImage.tex}

\input{Sections/ImageProcessing/SubSections/PreProc.tex}

\input{Sections/ImageProcessing/SubSections/InfoExtraction.tex}

The Image-processing-group also performs the task of writing the flag field for the LBM-group. The flag field is scaled to the desired screen pixel resolution. All the information extracted so far is stored in the \verb|ProcessingManager| and passed on to the Rigid-body-group (for obstacles, shorelines and boats) and the LBM-group (for the flag fields).
